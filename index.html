<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Building Audit Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f4f4f4;
      color: #555;
    }

    .container {
      display: flex;
      justify-content: space-between;
    }
    .header {
      background-color: #a85c42;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
    }

    .header img {
      height: 60px;
      width: auto;
    }

    .title {
      font-size: 1.8rem;
      font-weight: bold;
      text-align: center;
      flex-grow: 1;
    }
    
    /* Expand/Collapse All Buttons */
    .expand-collapse-controls {
      display: flex;
      justify-content: flex-start;
      gap: 10px;
      margin:  10px 0 10px;
    }
    
    .expand-collapse-controls button {
      padding: 8px 15px;
      font-size: 0.9rem;
      background-color: #a85c42;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    
    .expand-collapse-controls button:hover {
      background-color: #8b4c34;
    }

    h2 {
      background-color: #a85c42;
      color: white;
      padding: 10px 15px;
      margin: 20px 10px 0 10px;
      cursor: pointer;
      border-radius: 4px;
      font-size: 1.2rem;
      font-weight: normal;
    }

    .section {
      margin: 0 10px 20px 10px;
      padding: 20px;
      background: #fff;
      border: 1px solid #ddd;
      display: none;
      border-radius: 0 0 4px 4px;
    }

    .form-row {
      display: flex;
      flex-wrap: nowrap;
      align-items: center;
      margin-bottom: 15px;
      padding: 10px;
      border-bottom: 1px solid #eee;
      overflow-x: auto;
    }

    .form-row:last-child {
      border-bottom: none;
    }

    .form-label {
      flex: 0 0 150px;
      font-weight: bold;
      color: #555;
      margin-right: 15px;
      white-space: nowrap;
    }

    .form-label.required:after {
      content: " *";
      color: #e32;
      font-weight: bold;
    }

    .form-inputs {
      display: flex;
      flex-wrap: wrap; /* Changed from nowrap to wrap */
      align-items: center;
      gap: 15px;
      overflow-x: visible; /* Changed from auto to visible */
    }
    
    /* New styles for multi-row form inputs */
    .multi-row-section .form-inputs {
      flex-wrap: wrap;
      overflow-x: visible;
      row-gap: 15px;
    }
    
    .multi-row-section .input-group {
      margin-bottom: 5px;
    }

    .input-group {
      display: flex;
      align-items: center;
      gap: 5px;
      white-space: nowrap;
    }

    .input-group input[type="text"],
    .input-group input[type="number"] {
      width: 80px;
    }

    .input-group select {
      width: auto;
    }

    input, select, textarea {
      padding: 8px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
    }

    input:focus, select:focus, textarea:focus {
      border-color: #a85c42;
      outline: none;
    }

    /* Checkbox styling */
    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 20px;
      flex-wrap: nowrap;
    }

    .checkbox-option {
      display: flex;
      align-items: center;
      gap: 5px;
      white-space: nowrap;
    }

    .checkbox-option input[type="checkbox"] {
      width: auto;
      margin: 0;
    }

    /* Radio buttons styling */
    .radio-group {
      display: flex;
      gap: 15px;
      flex-wrap: nowrap;
    }

    .radio-option {
      display: flex;
      align-items: center;
      gap: 5px;
      white-space: nowrap;
    }

    .radio-option input[type="radio"] {
      width: auto;
      margin: 0;
    }

    /* Unit selector */
    .unit-selector {
      display: flex;
      align-items: center;
      border: 1px solid #ccc;
      border-radius: 4px;
      overflow: hidden;
    }

    .unit-selector select {
      border: none;
      border-left: 1px solid #ccc;
      border-radius: 0;
      padding: 8px 5px;
      background-color: #f9f9f9;
    }

    .form-actions {
      display: flex;
      justify-content: flex-end;
       gap: 10px;
       margin:  10px 0 10px;
    }

    .form-actions button {
      padding: 8px 15px;
      font-size: 1rem;
      background-color: #a85c42;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .form-actions button:hover {
      background-color: #8b4c34;
    }

    .field-hint {
      font-size: 12px;
      color: #777;
      margin-left: 5px;
    }

    /* Category and Subcategory Styling */
    .category-header {
      background-color: #c17a62;
      color: white;
      padding: 8px 15px;
      margin: 15px 0 10px 0;
      font-size: 1.1rem;
      font-weight: bold;
      border-radius: 4px;
      cursor: pointer;
      position: relative;
    }
    
    .category-header:after {
      content: '▼';
      position: absolute;
      right: 15px;
      transition: transform 0.3s;
    }
    
    .category-header.collapsed:after {
      transform: rotate(-90deg);
    }
    
    .category-content {
      overflow: hidden;
      transition: max-height 0.3s ease-out;
      max-height: 2000px; /* Arbitrary large value */
    }
    
    .category-content.collapsed {
      max-height: 0;
    }

    .subcategory {
      margin: 5px 0;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      overflow: hidden;
    }

    .subcategory-header {
      background-color: #f0d9d2;
      color: #8b4c34;
      padding: 8px 15px;
      font-weight: bold;
      cursor: pointer;
      position: relative;
      transition: background-color 0.2s;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .subcategory-header:hover {
      background-color: #e8c9be;
    }
    
    .subcategory-header:after {
      content: '▼';
      position: absolute;
      right: 15px;
      transition: transform 0.3s;
    }
    
    .subcategory-header.collapsed:after {
      transform: rotate(-90deg);
    }
    
    .subcategory-content {
      overflow: hidden;
      transition: max-height 0.3s ease-out;
      max-height: 500px; /* Arbitrary large value */
    }
    
    .subcategory-content.collapsed {
      max-height: 0;
    }
    
    /* Tree structure styling */
    .tree-level-1 {
      margin-left: 0;
    }
    
    .tree-level-2 {
      margin-left: 20px;
    }
    
    .tree-level-3 {
      margin-left: 40px;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .form-row {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .form-label {
        margin-bottom: 10px;
      }
      
      .form-inputs {
        width: 100%;
        overflow-x: auto;
      }
    }
    
    /* Add table styles */
    .input-table {
      width: 100%;
      border-collapse: collapse;
      margin: 10px 0;
    }
    .input-table:not(:first-child) {
      display: none; /* Hide all tables by default except the first one */
    }
    .subcategory-content {
      display: none; /* Hide content by default */
    }
    .subcategory-header input[type="checkbox"]:checked ~ .subcategory-content {
      display: block; /* Show content when checkbox is checked */
    }
    .subcategory-header input[type="checkbox"]:checked ~ .subcategory-content .input-table {
      display: table; /* Show table when parent content is shown */
    }
    .input-table th, .input-table td {
      padding: 8px;
      text-align: left;
      border: 1px solid #ddd;
    }
    .action-buttons {
      white-space: nowrap;
    }
    .remove-row-btn {
      background: none;
      border: none;
      color: #f44336;
      font-weight: bold;
      cursor: pointer;
      font-size: 16px;
      margin: 0 3px;
    }
    .add-row-btn {
      display: none; /* Hide the add row buttons */
    }
  </style>
</head>
<body>

  <div class="header">
    <img src="EDSlogo.png" alt="Left Logo Placeholder">
    <div class="title">Building Audit Form</div>
    <img src="HCL-Technologies-Symbol.png" alt="Right Logo Placeholder">
  </div>

<!-- Add expand/collapse all buttons -->
<div class = "container">
<div class="expand-collapse-controls">
  <button type="button" id="expandAllBtn">Expand All</button>
  <button type="button" id="collapseAllBtn">Collapse All</button>
</div>
<div class="form-actions">
  <button type="button" onclick="saveForm()">Save</button>
  <button type="submit" onclick="submitForm()">Submit</button>
</div>
</div>

<h2 onclick="toggleSection('buildingInfo')">Building Information</h2>
<div id="buildingInfo" class="section">

  <div class="category-header">General Information</div>
  <div class="category-content">
  <div class="form-row">
    <!-- <div class="form-label"></div> -->
    <div class="form-inputs">
      <div class = "input-group">
        <span>Project Name:</span>
        <input type="text" required style="width: 150px;" name="project_name">
        </div>
        <div class = "input-group">
          <span>Brand:</span>
          <select name="brand">
            <option value="">Select Brand</option>
            <option value="Taj">Taj</option>
            <option value="SeleQtions">SeleQtions</option>
            <option value="Vivanta">Vivanta</option>
            <option value="Gateway">Gateway</option>
            <option value="Ginger">Ginger</option>
          </select>
        </div>
          <div class = "input-group">
            <span>Country:</span>
            <select required id="stateDropdown" name="country">
              <option value="">Please select</option>
              <option value="India">India</option>
            </select>
          </div>
      <div class="input-group">
        <span>State:</span>
        <select required id="stateDropdown" name="state">
          <option value="">Please select</option>
          <option value="AP">Andhra Pradesh</option>
          <option value="AR">Arunachal Pradesh</option>
          <option value="AS">Assam</option>
          <option value="BR">Bihar</option>
          <option value="CG">Chhattisgarh</option>
          <option value="GA">Goa</option>
          <option value="GJ">Gujarat</option>
          <option value="HR">Haryana</option>
          <option value="HP">Himachal Pradesh</option>
          <option value="JH">Jharkhand</option>
          <option value="KA">Karnataka</option>
          <option value="KL">Kerala</option>
          <option value="MP">Madhya Pradesh</option>
          <option value="MH">Maharashtra</option>
          <option value="MN">Manipur</option>
          <option value="ML">Meghalaya</option>
          <option value="MZ">Mizoram</option>
          <option value="NL">Nagaland</option>
          <option value="OR">Odisha</option>
          <option value="PB">Punjab</option>
          <option value="RJ">Rajasthan</option>
          <option value="SK">Sikkim</option>
          <option value="TN">Tamil Nadu</option>
          <option value="TG">Telangana</option>
          <option value="TR">Tripura</option>
          <option value="UP">Uttar Pradesh</option>
          <option value="UK">Uttarakhand</option>
          <option value="WB">West Bengal</option>
          <option value="DL">Delhi</option>
        </select>
      </div>
      <div class="input-group">
        <span>City:</span>
        <select required id="cityDropdown" name="city">
          <option value="">Please select a state first</option>
        </select>
      </div>
      <!-- <div class="input-group">
        <span>Area:</span>
        <input type="text" style="width: 80px;">
        <select>
          <option value="sqm">sq.m</option>
          <option value="sqft">sq.ft</option>
          <option value="acre">acre</option>
        </select>
      </div> -->
      <div class="input-group">
        <span>Years of Construction:</span>
        <input type="date" required style="width: 118px;" name="construction_date">
      </div>
      <div class="input-group">
        <span>Last Renovation:</span>
        <input type="date" style="width: 118px;" name="renovation_date">
      </div>
    <!-- </div> -->
  <!-- </div> -->
  
  <!-- <div class="form-row"> -->
    <!-- <div class="form-label "></div> -->
    <!-- <div class="form-inputs"> -->
      <div class="input-group">
        <span>No. of Floors Above grade:</span>
        <input type="number" min="0" max="99" required style="width: 60px;" name="floors_above_grade">
      </div>
      <div class="input-group">
        <span>No.of Floors Below Grade:</span>
        <input type="number" min="0" max="9" style="width: 60px;" name="floors_below_grade">
      </div>
      <div class="input-group">
        <span>Ownership:</span>
        <select required name="ownership">
          <option value="">Please select</option>
          <option>Owned</option>
          <option>Leased</option>
          <option>Managed</option>
        </select>
      <!-- </div> -->
    </div>
    <div class="input-group">
      <span>Certifications/Compliance</span>
      <select required name="certifications">
        <option value="">Please select</option>
        <option>LEED</option>
        <option>IGBC</option>
        <option>GRIHA</option>
      </select>
    <!-- </div> -->
  </div>
  <div class="input-group">
    <span>Last Audit Conducted:</span>
    <input type="date" required style="width: 118px;" name="last_audit_date">
   
  </div>
  <!-- </div> -->
</div>
</div>
</div>

<!-- <h2 onclick="toggleSection('siteArea')">Site & Area</h2> -->
 
<!-- <div id="siteArea" class="section"> -->
  <div class="category-header">Site & Area</div>
  <div class="category-content">
  <div class="form-row">
    <!-- <div class="form-label required">Site Details</div> -->
    <div class="form-inputs">
      <div class="input-group">
        <span>Site Area:</span>
        <input type="number" min="0" required style="width: 80px;">
        <select>
          <option value="sqm">sq.m</option>
          <option value="sqft">sq.ft</option>
          <option value="acre">acre</option>
        </select>
      </div>
      <div class="input-group">
        <span>Built-up Area:</span>
        <input type="number" min="0" required style="width: 80px;">
        <select>
          <option value="sqm">sq.m</option>
          <option value="sqft">sq.ft</option>
        </select>
      </div>
      <div class="input-group">
        <span>Basement Parking:</span>
        <input type="number" min="0" style="width: 80px;">
        <select>
          <option value="sqm">sq.m</option>
          <option value="sqft">sq.ft</option>
        </select>
      </div>
      <div class="input-group">
        <span>Ground Coverage:</span>
        <input type="number" min="0" maxlength="3" style="width: 60px;">
        <span>%</span>
      </div>
      <div class="input-group">
        <span>Open Area:</span>
        <input type="number" min="0" style="width: 80px;">
        <select>
          <option value="sqm">sq.m</option>
          <option value="sqft">sq.ft</option>
        </select>
      </div>
    </div>
  </div>
</div>

<!-- <h2 onclick="toggleSection('occupancy')">Occupancy</h2>
<div id="occupancy" class="section"> -->
  <div class="category-header">Occupancy</div>
  <div class="category-content">
  <div class="form-row">
    <!-- <div class="form-label required">Occupancy Details</div> -->
    <div class="form-inputs">
      <div class="input-group">
        <span>Number of Keys/Rooms:</span>
        <input type="number" required style="width: 60px;">
      </div>
      <div class="input-group">
        <span>Peak Occupancy Rate:</span>
        <input type="number" min="0" max="100" style="width: 60px;">
        <span>%</span>
      </div>
      <div class="input-group">
        <span>Average Guests/Day:</span>
        <input type="number" style="width: 60px;">
      </div>
      <div class="input-group">
        <span>Total Staff:</span>
        <input type="number" style="width: 60px;">
      </div>
    </div>
  </div>
</div>
</div>
</div>

<h2 onclick="toggleSection('energySystems')">Energy Systems</h2>
<div id="energySystems" class="section">
  <div class="form-row">
    <!-- <div class="form-label required">Energy Details</div> -->
    <div class="form-inputs">
      <div class="input-group">
        <span>Connected Load:</span>
        <input type="number" required style="width: 80px;">
        <span>kW</span>
      </div>
      <div class="input-group">
        <span>Contract Demand:</span>
        <input type="number" style="width: 80px;">
        <span>kVA</span>
      </div>
      <div class="input-group">
        <span>Backup Power:</span>
        <input type="number" style="width: 80px;">
        <span>kVA</span>
      </div>
      <div class="input-group">
        <span>Renewable Energy:</span>
        <input type="number" style="width: 80px;">
        <span>kWp</span>
      </div>
      <div class="input-group">
        <span>Type:</span>
        <select>
          <option value="">Select type</option>
          <option value="solar">Solar</option>
          <option value="wind">Wind</option>
          <option value="biomass">Biomass</option>
          <option value="other">Other</option>
        </select>
      </div>
    </div>
  </div>
</div>

<h2 onclick="toggleSection('waterSystems')">Water Systems</h2>
<div id="waterSystems" class="section">
  <div class="form-row">
    <div class="form-label required">Water Source</div>
    <div class="form-inputs">
      <div class="checkbox-group">
        <label class="checkbox-option">
          <input type="checkbox" name="waterSource" value="Municipal"> Municipal
        </label>
        <label class="checkbox-option">
          <input type="checkbox" name="waterSource" value="Borewell"> Borewell
        </label>
        <label class="checkbox-option">
          <input type="checkbox" name="waterSource" value="Tanker"> Tanker
        </label>
        <label class="checkbox-option">
          <input type="checkbox" name="waterSource" value="Other"> Other
        </label>
      </div>
    </div>
  </div>
  
  <div class="form-row">
    <div class="form-label required">Water Usage</div>
    <div class="form-inputs">
      <div class="input-group">
        <span>Daily Water Demand:</span>
        <input type="number" required style="width: 80px;" name="daily_water_demand">
        <span>KLD</span>
      </div>
      <div class="input-group">
        <span>STP Capacity:</span>
        <input type="number" style="width: 80px;" name="stp_capacity">
        <span>KLD</span>
      </div>
      <div class="input-group">
        <span>Treated Water Reuse:</span>
        <input type="number" min="0" max="100" style="width: 60px;" name="treated_water_reuse">
        <span>%</span>
      </div>
      <div class="input-group">
        <span>Purpose:</span>
        <select>
          <option value="">Select purpose</option>
          <option value="flushing">Flushing</option>
          <option value="gardening">Gardening</option>
          <option value="cooling">Cooling</option>
          <option value="multiple">Multiple</option>
        </select>
      </div>
    </div>
  </div>
  
  <div class="form-row">
    <div class="form-label">Water Features</div>
    <div class="form-inputs">
      <div class="input-group">
        <span>Water-saving Fixtures:</span>
        <div class="radio-group">
          <label class="radio-option">
            <input type="radio" name="waterFixtures" value="Yes"> Yes
          </label>
          <label class="radio-option">
            <input type="radio" name="waterFixtures" value="No"> No
          </label>
        </div>
      </div>
      <div class="input-group">
        <span>Rainwater Harvesting:</span>
        <div class="radio-group">
          <label class="radio-option">
            <input type="radio" name="rainwaterHarvesting" value="Yes"> Yes
          </label>
          <label class="radio-option">
            <input type="radio" name="rainwaterHarvesting" value="No"> No
          </label>
        </div>
      </div>
    </div>
  </div>
</div>

<h2 onclick="toggleSection('wasteManagement')">Waste Management</h2>
<div id="wasteManagement" class="section">
  <div class="form-row">
    <!-- <div class="form-label required">Waste Details</div> -->
    <div class="form-inputs">
      <div class="input-group">
        <span>Total Waste Generation:</span>
        <input type="text" required style="width: 80px;">
        <span>kg/day</span>
      </div>
      <div class="input-group">
        <span>Segregation at Source:</span>
        <div class="radio-group">
          <label class="radio-option">
            <input type="radio" name="segregation" value="Yes"> Yes
          </label>
          <label class="radio-option">
            <input type="radio" name="segregation" value="No"> No
          </label>
        </div>
      </div>
      <div class="input-group">
        <span>Composting Facility:</span>
        <div class="radio-group">
          <label class="radio-option">
            <input type="radio" name="composting" value="Yes"> Yes
          </label>
          <label class="radio-option">
            <input type="radio" name="composting" value="No"> No
          </label>
        </div>
      </div>
      <div class="input-group">
        <span>Composting Capacity:</span>
        <input type="text" style="width: 80px;">
        <span>kg/day</span>
      </div>
      <div class="input-group">
        <span>Waste Collection Agency:</span>
        <input type="text" style="width: 120px;">
      </div>
    </div>
  </div>
</div>

<h2 onclick="toggleSection('spaceInfo')">Space Information</h2>
<div id="spaceInfo" class="section">
  <!-- Meeting and Event Spaces Category -->
  <div class="category-header">Meeting and Event Spaces</div>
  <div class="category-content">
    
    <div class="subcategory tree-level-2">
      
      <div class="subcategory-header">
        <input type="checkbox" id="banquetCheck"> 
        Banquet Halls
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>Maximum Capacity (people)</th>
              <th>No. of Events/Year</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="banquetTableBody">
            <tr>
              <td><input type="number" name="banquet_area[]" style="width: 80px;"></td>
              <td>
                <select name="banquet_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td><input type="number" name="banquet_capacity[]" style="width: 60px;"></td>
              <td><input type="number" name="banquet_events[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('banquetTableBody', 'banquet')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="outdoorLawnCheck"> 
        Outdoor event Lawns
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Max occupancy</th>
              <th>Area</th>
              <th>Unit</th>
              <th>No. of Events/month</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="outdoorLawnTableBody">
            <tr>
              <td><input type="number" name="outdoor_lawn_occupancy[]" style="width: 60px;"></td>
              <td><input type="number" name="outdoor_lawn_area[]" style="width: 80px;"></td>
              <td>
                <select name="outdoor_lawn_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td><input type="number" name="outdoor_lawn_events[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('outdoorLawnTableBody', 'outdoorLawn')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="conferenceCheck"> 
        Conference Rooms/Boardrooms
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Seating Capacity</th>
              <th>Area</th>
              <th>Unit</th>
              <th>Usage hours/month</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="conferenceTableBody">
            <tr>
              <td><input type="number" name="conference_capacity[]" style="width: 60px;"></td>
              <td><input type="number" name="conference_area[]" style="width: 80px;"></td>
              <td>
                <select name="conference_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td><input type="number" name="conference_hours[]" style="width: 80px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('conferenceTableBody', 'conference')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="businessCentreCheck"> 
        Business Centre
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>No. of workstations</th>
              <th>Usage hours/day</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="businessCentreTableBody">
            <tr>
              <td><input type="number" name="business_centre_workstations[]" style="width: 60px;"></td>
              <td><input type="number" name="business_centre_hours[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('businessCentreTableBody', 'businessCentre')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  
  <!-- Food and Beverage Outlets Category -->
  <div class="category-header">Food and Beverage Outlets</div>
  <div class="category-content">
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="restaurantCheck"> 
        All Day Dining Restaurants
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>No. of seats</th>
              <th>Avg. daily covers (meals served/day)</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="restaurantTableBody">
            <tr>
              <td><input type="number" name="restaurant_seats[]" style="width: 60px;"></td>
              <td><input type="number" name="restaurant_covers[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('restaurantTableBody', 'restaurant')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="specialityRestaurantCheck"> 
        Speciality Restaurants
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>No. of seats</th>
              <th>Avg. daily covers (meals served/day)</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="specialityRestaurantTableBody">
            <tr>
              <td><input type="number" name="speciality_restaurant_seats[]" style="width: 60px;"></td>
              <td><input type="number" name="speciality_restaurant_covers[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('specialityRestaurantTableBody', 'specialityRestaurant')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="cafeCheck"> 
        Cafe/Coffee Shop
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>No. of seats</th>
              <th>Operating Hours</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="cafeTableBody">
            <tr>
              <td><input type="number" name="cafe_seats[]" style="width: 60px;"></td>
              <td><input type="text" name="cafe_hours[]" style="width: 100px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('cafeTableBody', 'cafe')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="kitchenCheck"> 
        Kitchen
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>No. of meals prepared per day</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="kitchenTableBody">
            <tr>
              <td><input type="number" name="kitchen_area[]" style="width: 80px;"></td>
              <td>
                <select name="kitchen_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td><input type="number" name="kitchen_meals[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('kitchenTableBody', 'kitchen')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="staffCafetariaCheck"> 
        Staff Cafetaria
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>No. of meals prepared per day</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="staffCafetariaTableBody">
            <tr>
              <td><input type="number" name="staff_cafetaria_area[]" style="width: 80px;"></td>
              <td>
                <select name="staff_cafetaria_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td><input type="number" name="staff_cafetaria_meals[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('staffCafetariaTableBody', 'staffCafetaria')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  
  <!-- Wellness and Recreation Category -->
  <div class="category-header">Wellness and Recreation</div>
  <div class="category-content">
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="spaCheck"> 
        Spa/Massage Rooms
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>No. of Rooms</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="spaTableBody">
            <tr>
              <td><input type="number" name="spa_rooms[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('spaTableBody', 'spa')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="salonCheck"> 
        Salon
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="salonTableBody">
            <tr>
              <td><input type="number" name="salon_area[]" style="width: 80px;"></td>
              <td>
                <select name="salon_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('salonTableBody', 'salon')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="gymCheck"> 
        Fitness center/gym
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="gymTableBody">
            <tr>
              <td><input type="number" name="gym_area[]" style="width: 80px;"></td>
              <td>
                <select name="gym_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('gymTableBody', 'gym')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="multipurposeCheck"> 
        Multipurpose Space
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="multipurposeTableBody">
            <tr>
              <td><input type="number" name="multipurpose_area[]" style="width: 80px;"></td>
              <td>
                <select name="multipurpose_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('multipurposeTableBody', 'multipurpose')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="indoorPoolCheck"> 
        Swimming Pool (Indoor)
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="indoorPoolTableBody">
            <tr>
              <td><input type="number" name="indoor_pool_area[]" style="width: 80px;"></td>
              <td>
                <select name="indoor_pool_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('indoorPoolTableBody', 'indoorPool')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="outdoorPoolCheck"> 
        Swimming Pool (Outdoor)
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="outdoorPoolTableBody">
            <tr>
              <td><input type="number" name="outdoor_pool_area[]" style="width: 80px;"></td>
              <td>
                <select name="outdoor_pool_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('outdoorPoolTableBody', 'outdoorPool')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  
  <!-- BOH & Service Areas Category -->
  <div class="category-header">BOH & Service Areas</div>
  <div class="category-content">
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="laundryCheck"> 
        Laundry Rooms
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>Kg of laundry/day</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="laundryTableBody">
            <tr>
              <td><input type="number" name="laundry_area[]" style="width: 80px;"></td>
              <td>
                <select name="laundry_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td><input type="number" name="laundry_kg[]" style="width: 80px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('laundryTableBody', 'laundry')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="parkingCheck"> 
        Parking Basement
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>No. of Parking</th>
              <th>Lighting Type</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="parkingTableBody">
            <tr>
              <td><input type="number" name="parking_area[]" style="width: 80px;"></td>
              <td>
                <select name="parking_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td><input type="number" name="parking_spaces[]" style="width: 60px;"></td>
              <td>
                <select name="parking_lighting[]">
                  <option value="">Select type</option>
                  <option value="led">LED</option>
                  <option value="fluorescent">Fluorescent</option>
                  <option value="other">Other</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('parkingTableBody', 'parking')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- HVAC Systems Section -->
<h2 onclick="toggleSection('hvacSystems')">HVAC Systems</h2>
<div id="hvacSystems" class="section">
  
  <!-- Chiller Section -->
  <div class="category-header">Chiller</div>
  <div class="category-content">
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="chillerCheck"> 
        Chiller Details
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Type of Chiller</th>
              <th>Type of Compressor</th>
              <th>Adiabatic Cooling</th>
              <th>Year of Installation</th>
              <th>No. of Chillers</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="chillerTableBody">
            <tr>
              <td>
                <select name="chiller_type[]" class="table-select">
                  <option value="">Select</option>
                  <option value="water">Water</option>
                  <option value="air">Air</option>
                </select>
              </td>
              <td>
                <select name="compressor_type[]" class="table-select">
                  <option value="">Select</option>
                  <option value="screw">Screw</option>
                  <option value="scroll">Scroll</option>
                  <option value="centrifugal">Centrifugal</option>
                </select>
              </td>
              <td>
                <select name="adiabatic_cooling[]" class="table-select">
                  <option value="">Select</option>
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                </select>
              </td>
              <td><input type="number" name="chiller_installation_year[]" min="1900" max="2100"></td>
              <td><input type="number" name="chiller_quantity[]" min="0"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('chillerTableBody', 'chiller')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Cooling Tower Section -->
  <div class="category-header">Cooling Tower</div>
  <div class="category-content">
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="coolingTowerCheck"> 
        Cooling Tower Details
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Year of Installation</th>
              <th>Type of Cooling Tower</th>
              <th>Low Approach CT (1-1.5°C)</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="coolingTowerTableBody">
            <tr>
              <td><input type="number" name="cooling_tower_installation_year[]" min="1900" max="2100"></td>
              <td>
                <select name="cooling_tower_type[]" class="table-select">
                  <option value="">Select</option>
                  <option value="counter_flow">Counter Flow</option>
                  <option value="cross_flow">Cross Flow</option>
                </select>
              </td>
              <td>
                <select name="low_approach_ct[]" class="table-select">
                  <option value="">Select</option>
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('coolingTowerTableBody', 'coolingTower')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Air Handling Unit Section -->
  <div class="category-header">Air Handling Unit (AHU)</div>
  <div class="category-content">
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="ahuCheck"> 
        AHU Details
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Year of Installation</th>
              <th>Capacity (TR/CFM)</th>
              <th>No. of Blowers</th>
              <th>Motor Rating (kW/HP)</th>
              <th>Efficiency Rating</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="ahuTableBody">
            <tr>
              <td><input type="number" name="ahu_installation_year[]" min="1900" max="2100"></td>
              <td><input type="text" name="ahu_capacity[]"></td>
              <td><input type="number" name="ahu_blowers[]" min="0"></td>
              <td><input type="text" name="ahu_motor_rating[]"></td>
              <td>
                <select name="ahu_efficiency[]" class="table-select">
                  <option value="">Select</option>
                  <option value="IE2">IE2</option>
                  <option value="IE3">IE3</option>
                  <option value="IE4">IE4</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('ahuTableBody', 'ahu')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Fan Coil Unit Section -->
  <div class="category-header">Fan Coil Unit (FCU)</div>
  <div class="category-content">
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="fcuCheck"> 
        FCU Details
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Year of Installation</th>
              <th>Capacity (TR/CFM)</th>
              <th>Thermostat Installed</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="fcuTableBody">
            <tr>
              <td><input type="number" name="fcu_installation_year[]" min="1900" max="2100"></td>
              <td><input type="text" name="fcu_capacity[]"></td>
              <td>
                <select name="fcu_thermostat[]" class="table-select">
                  <option value="">Select</option>
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('fcuTableBody', 'fcu')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Boiler Section -->
  <div class="category-header">Boiler</div>
  <div class="category-content">
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="boilerCheck"> 
        Boiler Details
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Year of Installation</th>
              <th>Type of Unit</th>
              <th>Capacity (TPH)</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="boilerTableBody">
            <tr>
              <td><input type="number" name="boiler_installation_year[]" min="1900" max="2100"></td>
              <td>
                <select name="boiler_type[]" class="table-select">
                  <option value="">Select</option>
                  <option value="fuel">Fuel</option>
                  <option value="electric">Electric</option>
                </select>
              </td>
              <td><input type="text" name="boiler_capacity[]"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('boilerTableBody', 'boiler')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Lighting Section -->
  <div class="category-header">Lighting</div>
  <div class="category-content">
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="lightingCheck"> 
        Lighting Details
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Percentage of LED lights</th>
              <th>Occupancy/Motion Sensors Installed</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="lightingTableBody">
            <tr>
              <td><input type="number" name="led_percentage[]" min="0" max="100"></td>
              <td>
                <select name="occupancy_sensors[]" class="table-select">
                  <option value="">Select</option>
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('lightingTableBody', 'lighting')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Renewable Energy Section -->
  <div class="category-header">Renewable Energy</div>
  <div class="category-content">
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="renewableCheck"> 
        Renewable Energy Details
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Year of Installation</th>
              <th>Installed Capacity (kW)</th>
              <th>Peak Power (kWp)</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="renewableTableBody">
            <tr>
              <td><input type="number" name="renewable_installation_year[]" min="1900" max="2100"></td>
              <td><input type="number" name="installed_capacity[]" min="0" step="0.01"></td>
              <td><input type="number" name="peak_power[]" min="0" step="0.01"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('renewableTableBody', 'renewable')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

</div> <!-- End of HVAC Systems section -->

<!-- <div class="form-actions">
  <button type="button" onclick="saveForm()">Save</button>
  <button type="submit" onclick="submitForm()">Submit</button>
</div> -->

<script>
  // Show the first section by default
  window.onload = function() {
    document.querySelector('.section').style.display = 'block';
    document.querySelector('.category-content').style.display = 'block';
    
    // Initialize all collapsible elements
    initializeCollapsibles();
  };

  function toggleSection(id) {
    const section = document.getElementById(id);
    section.style.display = section.style.display === "block" ? "none" : "block";
  }
  
  // Initialize collapsible elements
  function initializeCollapsibles() {
    // Set up category headers
    const categoryHeaders = document.querySelectorAll('.category-header');
    categoryHeaders.forEach(header => {
      header.addEventListener('click', function() {
        this.classList.toggle('collapsed');
        const content = this.nextElementSibling;
        content.classList.toggle('collapsed');
      });
    });
    
    // Set up subcategory headers with checkboxes
    const subcategoryHeaders = document.querySelectorAll('.subcategory-header');
    subcategoryHeaders.forEach(header => {
      const checkbox = header.querySelector('input[type="checkbox"]');
      const content = header.nextElementSibling;
      
      // Initialize visibility based on checkbox state
      if (content) {
        content.style.display = checkbox.checked ? 'block' : 'none';
        // Show any tables in the content
        const tables = content.querySelectorAll('.input-table');
        tables.forEach(table => {
          table.style.display = checkbox.checked ? 'table' : 'none';
        });
      }
      
      // Toggle on header click (but not on checkbox click)
      header.addEventListener('click', function(e) {
        // Only toggle if the click wasn't on the checkbox
        if (e.target !== checkbox) {
          checkbox.checked = !checkbox.checked;
          const event = new Event('change');
          checkbox.dispatchEvent(event);
        }
      });
      
      // Toggle content on checkbox change
      checkbox.addEventListener('change', function() {
        if (content) {
          content.style.display = this.checked ? 'block' : 'none';
          // Show/hide all tables in this content
          const tables = content.querySelectorAll('.input-table');
          tables.forEach(table => {
            table.style.display = this.checked ? 'table' : 'none';
          });
        }
      });
    });
  }
  
  // Function to expand all sections
  function expandAll() {
    // Expand main sections
    const sections = ['buildingInfo', 'energySystems', 'waterSystems', 'wasteManagement', 'spaceInfo', 'hvacSystems'];
    sections.forEach(id => {
      const section = document.getElementById(id);
      if (section) {
        section.style.display = 'block';
      }
    });
    
    // Expand all category headers
    const categoryHeaders = document.querySelectorAll('.category-header');
    categoryHeaders.forEach(header => {
      header.classList.remove('collapsed');
      const content = header.nextElementSibling;
      content.classList.remove('collapsed');
    });
    
    // Expand all subcategory headers
    const subcategoryHeaders = document.querySelectorAll('.subcategory-header');
    subcategoryHeaders.forEach(header => {
      header.classList.remove('collapsed');
      const content = header.nextElementSibling;
      content.classList.remove('collapsed');
    });
  }
  
  // Function to collapse all sections
  function collapseAll() {
    // Collapse main sections
    const sections = ['buildingInfo', 'energySystems', 'waterSystems', 'wasteManagement', 'spaceInfo', 'hvacSystems'];
    sections.forEach(id => {
      const section = document.getElementById(id);
      if (section) {
        section.style.display = 'none';
      }
    });
    
    // Collapse all category headers
    const categoryHeaders = document.querySelectorAll('.category-header');
    categoryHeaders.forEach(header => {
      header.classList.add('collapsed');
      const content = header.nextElementSibling;
      content.classList.add('collapsed');
    });
    
    // Collapse all subcategory headers
    const subcategoryHeaders = document.querySelectorAll('.subcategory-header');
    subcategoryHeaders.forEach(header => {
      header.classList.add('collapsed');
      const content = header.nextElementSibling;
      content.classList.add('collapsed');
    });
  }

  // City data based on state selection
  const cityData = {
    "AP": ["Visakhapatnam", "Vijayawada", "Guntur", "Nellore", "Kurnool"],
    "AR": ["Itanagar", "Naharlagun", "Pasighat", "Namsai"],
    "AS": ["Guwahati", "Silchar", "Dibrugarh", "Jorhat", "Nagaon"],
    "BR": ["Patna", "Gaya", "Muzaffarpur", "Bhagalpur", "Darbhanga"],
    "CG": ["Raipur", "Bhilai", "Bilaspur", "Korba", "Durg"],
    "GA": ["Panaji", "Margao", "Vasco da Gama", "Mapusa", "Ponda"],
    "GJ": ["Ahmedabad", "Surat", "Vadodara", "Rajkot", "Gandhinagar"],
    "HR": ["Gurugram", "Faridabad", "Panipat", "Ambala", "Karnal"],
    "HP": ["Shimla", "Dharamshala", "Solan", "Mandi", "Kullu"],
    "JH": ["Ranchi", "Jamshedpur", "Dhanbad", "Bokaro", "Hazaribagh"],
    "KA": ["Bengaluru", "Mysuru", "Hubli", "Mangaluru", "Belagavi"],
    "KL": ["Thiruvananthapuram", "Kochi", "Kozhikode", "Thrissur", "Kollam"],
    "MP": ["Bhopal", "Indore", "Jabalpur", "Gwalior", "Ujjain"],
    "MH": ["Mumbai", "Pune", "Nagpur", "Thane", "Nashik"],
    "MN": ["Imphal", "Thoubal", "Bishnupur", "Churachandpur"],
    "ML": ["Shillong", "Tura", "Jowai", "Nongstoin", "Williamnagar"],
    "MZ": ["Aizawl", "Lunglei", "Champhai", "Serchhip", "Kolasib"],
    "NL": ["Kohima", "Dimapur", "Mokokchung", "Tuensang", "Wokha"],
    "OR": ["Bhubaneswar", "Cuttack", "Rourkela", "Berhampur", "Sambalpur"],
    "PB": ["Ludhiana", "Amritsar", "Jalandhar", "Patiala", "Bathinda"],
    "RJ": ["Jaipur", "Jodhpur", "Udaipur", "Kota", "Ajmer"],
    "SK": ["Gangtok", "Namchi", "Gyalshing", "Mangan", "Singtam"],
    "TN": ["Chennai", "Coimbatore", "Madurai", "Tiruchirappalli", "Salem"],
    "TG": ["Hyderabad", "Warangal", "Nizamabad", "Karimnagar", "Khammam"],
    "TR": ["Agartala", "Udaipur", "Dharmanagar", "Kailasahar", "Belonia"],
    "UP": ["Lucknow", "Kanpur", "Agra", "Varanasi", "Meerut"],
    "UK": ["Dehradun", "Haridwar", "Roorkee", "Haldwani", "Rudrapur"],
    "WB": ["Kolkata", "Howrah", "Durgapur", "Asansol", "Siliguri"],
    "DL": ["New Delhi", "Delhi", "Dwarka", "Rohini", "Pitampura"]
  };

  // Update city dropdown based on state selection
  document.addEventListener('DOMContentLoaded', function() {
    const stateDropdown = document.getElementById('stateDropdown');
    const cityDropdown = document.getElementById('cityDropdown');
    
    if (stateDropdown && cityDropdown) {
      stateDropdown.addEventListener('change', function() {
        const selectedState = this.value;
        cityDropdown.innerHTML = ''; // Clear existing options
        
        if (!selectedState) {
          const defaultOption = document.createElement('option');
          defaultOption.value = '';
          defaultOption.textContent = 'Please select a state first';
          cityDropdown.appendChild(defaultOption);
          return;
        }
        
        // Add default option
        const defaultOption = document.createElement('option');
        defaultOption.value = '';
        defaultOption.textContent = 'Please select';
        cityDropdown.appendChild(defaultOption);
        
        // Add cities for selected state
        const cities = cityData[selectedState] || [];
        cities.forEach(city => {
          const option = document.createElement('option');
          option.value = city;
          option.textContent = city;
          cityDropdown.appendChild(option);
        });
      });
    }
    
    // Toggle input fields based on checkbox selection
    const checkboxes = document.querySelectorAll('.subcategory-header input[type="checkbox"]');
      
    checkboxes.forEach(checkbox => {
      // Find the closest subcategory content
      const subcategoryContent = checkbox.closest('.subcategory').querySelector('.subcategory-content');
      const inputGroups = subcategoryContent ? subcategoryContent.querySelectorAll('.input-group') : [];
      
      // Initialize visibility based on checkbox state
      inputGroups.forEach(group => {
        group.style.display = checkbox.checked ? 'flex' : 'none';
      });
      
      // Add change event listener
      checkbox.addEventListener('change', function() {
        inputGroups.forEach(group => {
          group.style.display = this.checked ? 'flex' : 'none';
        });
      });
    });
    
    // Add event listeners for expand/collapse all buttons
    const expandAllBtn = document.getElementById('expandAllBtn');
    const collapseAllBtn = document.getElementById('collapseAllBtn');
    
    if (expandAllBtn) {
      expandAllBtn.addEventListener('click', expandAll);
    }
    
    if (collapseAllBtn) {
      collapseAllBtn.addEventListener('click', collapseAll);
    }
  });

  function saveForm() {
    alert("Form values saved locally (you can implement actual save logic here).");
  }

  function submitForm() {
    // Basic validation for required fields
    const requiredFields = document.querySelectorAll('input[required], select[required]');
    let valid = true;
    
    requiredFields.forEach(field => {
      if (!field.value) {
        field.style.borderColor = '#e32';
        valid = false;
      } else {
        field.style.borderColor = '#ccc';
      }
    });
    
    if (!valid) {
      alert("Please fill in all required fields.");
      return;
    }
    
    alert("Form submitted (you can hook this up to a backend).");
  }

  function addRow(tableId, type) {
    const tbody = document.getElementById(tableId);
    const newRow = tbody.insertRow();
    
    // Clone the first row's cells to maintain the same structure
    const firstRow = tbody.rows[0];
    newRow.innerHTML = firstRow.innerHTML;
    
    // Clear any values in the new row
    const inputs = newRow.getElementsByTagName('input');
    const selects = newRow.getElementsByTagName('select');
    
    for (let input of inputs) {
      if (input.type !== 'button') {
        input.value = '';
      }
    }
    
    for (let select of selects) {
      select.selectedIndex = 0;
    }
    
    // Show the table if it was hidden
    const table = tbody.closest('table');
    if (table) {
      table.style.display = 'table';
    }
  }

  function removeRow(button) {
    const row = button.closest('tr');
    const tbody = row.parentNode;
    const table = tbody.closest('table');
    
    // Don't remove the last row
    if (tbody.rows.length > 1) {
      row.remove();
    } else {
      // Clear the row instead of removing it
      const inputs = row.getElementsByTagName('input');
      const selects = row.getElementsByTagName('select');
      
      for (let input of inputs) {
        if (input.type !== 'button') {
          input.value = '';
        }
      }
      
      for (let select of selects) {
        select.selectedIndex = 0;
      }
      
      // Hide the table if it's empty
      if (table && tbody.rows.length === 1) {
        const inputs = tbody.getElementsByTagName('input');
        let isEmpty = true;
        for (let input of inputs) {
          if (input.type !== 'button' && input.value.trim() !== '') {
            isEmpty = false;
            break;
          }
        }
        if (isEmpty) {
          table.style.display = 'none';
        }
      }
    }
  }
</script>

</body>
</html>

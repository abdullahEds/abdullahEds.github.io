<!DOCTYPE html>
<html lang="en">
<head>
  <style>
    input[type="number"], .number-format {
      text-align: right;
    }
  </style>
  <meta charset="UTF-8">
  <title>Building Audit Form</title>
</head>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<link rel="stylesheet" href="style.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
<script src="script.js"></script>
<body>

  <div class="header">
    <img src="EDSlogo.png" alt="Left Logo Placeholder">
    <div class="title">Building Audit Form</div>
    <img src="HCL-Technologies-Symbol.png" alt="Right Logo Placeholder">
  </div>

  <!-- Add expand/collapse all buttons -->
  <div class = "container">
    <div class="expand-collapse-controls">
      <button type="button" id="expandAllBtn">Expand All</button>
      <button type="button" id="collapseAllBtn">Collapse All</button>
    </div>
    <div class="form-actions">
      <button type="button" onclick="saveForm()">Save</button>
      <button type="submit" onclick="submitForm()">Submit</button>
    </div>
  </div>

<h2 onclick="toggleSection('buildingInfo')">Building Information</h2>
<div id="buildingInfo" class="section">

  <div class="category-header">General Information</div>
  <div class="category-content">
  <div class="form-row">
    <!-- <div class="form-label"></div> -->
    <div class="form-inputs">
      <div class = "input-group">
        <span>Project Name:</span>
        <input type="text" required style="width: 150px;" name="project_name">
        </div>
        <div class = "input-group">
          <span>Brand:</span>
          <select name="brand">
            <option value="">Select Brand</option>
            <option value="Taj">Taj</option>
            <option value="SeleQtions">SeleQtions</option>
            <option value="Vivanta">Vivanta</option>
            <option value="Gateway">Gateway</option>
            <option value="Ginger">Ginger</option>
          </select>
        </div>
          <div class = "input-group">
            <span>Country:</span>
            <select required id="stateDropdown" name="country">
              <option value="">Please select</option>
              <option value="India">India</option>
            </select>
          </div>
      <div class="input-group">
        <span>State:</span>
        <select required id="stateDropdown" name="state">
          <option value="">Please select</option>
          <option value="AP">Andhra Pradesh</option>
          <option value="AR">Arunachal Pradesh</option>
          <option value="AS">Assam</option>
          <option value="BR">Bihar</option>
          <option value="CG">Chhattisgarh</option>
          <option value="GA">Goa</option>
          <option value="GJ">Gujarat</option>
          <option value="HR">Haryana</option>
          <option value="HP">Himachal Pradesh</option>
          <option value="JH">Jharkhand</option>
          <option value="KA">Karnataka</option>
          <option value="KL">Kerala</option>
          <option value="MP">Madhya Pradesh</option>
          <option value="MH">Maharashtra</option>
          <option value="MN">Manipur</option>
          <option value="ML">Meghalaya</option>
          <option value="MZ">Mizoram</option>
          <option value="NL">Nagaland</option>
          <option value="OR">Odisha</option>
          <option value="PB">Punjab</option>
          <option value="RJ">Rajasthan</option>
          <option value="SK">Sikkim</option>
          <option value="TN">Tamil Nadu</option>
          <option value="TG">Telangana</option>
          <option value="TR">Tripura</option>
          <option value="UP">Uttar Pradesh</option>
          <option value="UK">Uttarakhand</option>
          <option value="WB">West Bengal</option>
          <option value="DL">Delhi</option>
        </select>
      </div>
      <div class="input-group">
        <span>City:</span>
        <select required id="cityDropdown" name="city">
          <option value="">Please select a state first</option>
        </select>
      </div>
      <!-- <div class="input-group">
        <span>Area:</span>
        <input type="text" style="width: 80px;">
        <select>
          <option value="sqm">sq.m</option>
          <option value="sqft">sq.ft</option>
          <option value="acre">acre</option>
        </select>
      </div> -->
      <div class="input-group">
        <span>Years of Construction:</span>
        <input type="date" required style="width: 118px;" name="construction_date">
      </div>
      <div class="input-group">
        <span>Last Renovation:</span>
        <input type="date" style="width: 118px;" name="renovation_date">
      </div>
    <!-- </div> -->
  <!-- </div> -->
  
  <!-- <div class="form-row"> -->
    <!-- <div class="form-label "></div> -->
    <!-- <div class="form-inputs"> -->
      <div class="input-group">
        <span>No. of Floors Above grade:</span>
        <input type="text" class="number-format" min="0" max="99" required style="width: 60px;" name="floors_above_grade">
      </div>
      <div class="input-group">
        <span>No.of Floors Below Grade:</span>
        <input type="text" class="number-format" min="0" max="9" style="width: 60px;" name="floors_below_grade">
      </div>
      <div class="input-group">
        <span>Ownership:</span>
        <select required name="ownership">
          <option value="">Please select</option>
          <option>Owned</option>
          <option>Leased</option>
          <option>Managed</option>
        </select>
      <!-- </div> -->
    </div>
    <div class="input-group">
      <span>Certifications/Compliance</span>
      <select required name="certifications">
        <option value="">Please select</option>
        <option>LEED</option>
        <option>IGBC</option>
        <option>GRIHA</option>
      </select>
    <!-- </div> -->
  </div>
  <div class="input-group">
    <span>Last Audit Conducted:</span>
    <input type="date" required style="width: 118px;" name="last_audit_date">
   
  </div>
  <!-- </div> -->
</div>
</div>
</div>

<!-- <h2 onclick="toggleSection('siteArea')">Site & Area</h2> -->
 
<!-- <div id="siteArea" class="section"> -->
  <div class="category-header">Site & Area</div>
  <div class="category-content">
  <div class="form-row">
    <!-- <div class="form-label required">Site Details</div> -->
    <div class="form-inputs">
      <div class="input-group">
        <span>Site Area:</span>
        <input type="text" class="number-format" min="0" required style="width: 80px;">
        <select>
          <option value="sqm">sq.m</option>
          <option value="sqft">sq.ft</option>
          <option value="acre">acre</option>
        </select>
      </div>
      <div class="input-group">
        <span>Built-up Area:</span>
        <input type="text" class="number-format" min="0" required style="width: 80px;">
        <select>
          <option value="sqm">sq.m</option>
          <option value="sqft">sq.ft</option>
        </select>
      </div>
      <div class="input-group">
        <span>Basement Parking:</span>
        <input type="text" class="number-format" min="0" style="width: 80px;">
        <select>
          <option value="sqm">sq.m</option>
          <option value="sqft">sq.ft</option>
        </select>
      </div>
      <div class="input-group">
        <span>Ground Coverage:</span>
        <input type="text" class="number-format" min="0" maxlength="3" style="width: 60px;">
        <span>%</span>
      </div>
      <div class="input-group">
        <span>Open Area:</span>
        <input type="text" class="number-format" min="0" style="width: 80px;">
        <select>
          <option value="sqm">sq.m</option>
          <option value="sqft">sq.ft</option>
        </select>
      </div>
    </div>
  </div>
</div>

<!-- <h2 onclick="toggleSection('occupancy')">Occupancy</h2>
<div id="occupancy" class="section"> -->
  <div class="category-header">Occupancy</div>
  <div class="category-content">
  <div class="form-row">
    <!-- <div class="form-label required">Occupancy Details</div> -->
    <div class="form-inputs">
      <div class="input-group">
        <span>Number of Keys/Rooms:</span>
        <input type="text" class="number-format" required style="width: 60px;">
      </div>
      <div class="input-group">
        <span>Peak Occupancy Rate:</span>
        <input type="text" class="number-format" min="0" max="100" style="width: 60px;">
        <span>%</span>
      </div>
      <div class="input-group">
        <span>Average Guests/Day:</span>
        <input type="text" class="number-format" style="width: 60px;">
      </div>
      <div class="input-group">
        <span>Total Staff:</span>
        <input type="text" class="number-format" style="width: 60px;">
      </div>
    </div>
  </div>
</div>
</div>
</div>

<h2 onclick="toggleSection('energySystems')">Energy Systems</h2>
<div id="energySystems" class="section">
  <div class="form-row">
    <!-- <div class="form-label required">Energy Details</div> -->
    <div class="form-inputs">
      <div class="input-group">
        <span>Connected Load:</span>
        <input type="text" class="number-format" required style="width: 80px;">
        <span>kW</span>
      </div>
      <div class="input-group">
        <span>Contract Demand:</span>
        <input type="text" class="number-format" style="width: 80px;">
        <span>kVA</span>
      </div>
      <div class="input-group">
        <span>Backup Power:</span>
        <input type="text" class="number-format" style="width: 80px;">
        <span>kVA</span>
      </div>
      <div class="input-group">
        <span>Renewable Energy:</span>
        <input type="text" class="number-format" style="width: 80px;">
        <span>kWp</span>
      </div>
      <div class="input-group">
        <span>Type:</span>
        <select>
          <option value="">Select type</option>
          <option value="solar">Solar</option>
          <option value="wind">Wind</option>
          <option value="biomass">Biomass</option>
          <option value="other">Other</option>
        </select>
      </div>
    </div>
  </div>
</div>

<h2 onclick="toggleSection('waterSystems')">Water Systems</h2>
<div id="waterSystems" class="section">
  <div class="form-row">
    <div class="form-label required">Water Source</div>
    <div class="form-inputs">
      <div class="checkbox-group">
        <label class="checkbox-option">
          <input type="checkbox" name="waterSource" value="Municipal"> Municipal
        </label>
        <label class="checkbox-option">
          <input type="checkbox" name="waterSource" value="Borewell"> Borewell
        </label>
        <label class="checkbox-option">
          <input type="checkbox" name="waterSource" value="Tanker"> Tanker
        </label>
        <label class="checkbox-option">
          <input type="checkbox" name="waterSource" value="Other"> Other
        </label>
      </div>
    </div>
  </div>
  
  <div class="form-row">
    <div class="form-label required">Water Usage</div>
    <div class="form-inputs">
      <div class="input-group">
        <span>Daily Water Demand:</span>
        <input type="text" class="number-format" required style="width: 80px;" name="daily_water_demand">
        <span>KLD</span>
      </div>
      <div class="input-group">
        <span>STP Capacity:</span>
        <input type="text" class="number-format" style="width: 80px;" name="stp_capacity">
        <span>KLD</span>
      </div>
      <div class="input-group">
        <span>Treated Water Reuse:</span>
        <input type="text" class="number-format" min="0" max="100" style="width: 60px;" name="treated_water_reuse">
        <span>%</span>
      </div>
      <div class="input-group">
        <span>Purpose:</span>
        <select>
          <option value="">Select purpose</option>
          <option value="flushing">Flushing</option>
          <option value="gardening">Gardening</option>
          <option value="cooling">Cooling</option>
          <option value="multiple">Multiple</option>
        </select>
      </div>
    </div>
  </div>
  
  <div class="form-row">
    <div class="form-label">Water Features</div>
    <div class="form-inputs">
      <div class="input-group">
        <span>Water-saving Fixtures:</span>
        <div class="radio-group">
          <label class="radio-option">
            <input type="radio" name="waterFixtures" value="Yes"> Yes
          </label>
          <label class="radio-option">
            <input type="radio" name="waterFixtures" value="No"> No
          </label>
        </div>
      </div>
      <div class="input-group">
        <span>Rainwater Harvesting:</span>
        <div class="radio-group">
          <label class="radio-option">
            <input type="radio" name="rainwaterHarvesting" value="Yes"> Yes
          </label>
          <label class="radio-option">
            <input type="radio" name="rainwaterHarvesting" value="No"> No
          </label>
        </div>
      </div>
    </div>
  </div>
</div>

<h2 onclick="toggleSection('wasteManagement')">Waste Management</h2>
<div id="wasteManagement" class="section">
  <div class="form-row">
    <!-- <div class="form-label required">Waste Details</div> -->
    <div class="form-inputs">
      <div class="input-group">
        <span>Total Waste Generation:</span>
        <input type="text" required style="width: 80px;">
        <span>kg/day</span>
      </div>
      <div class="input-group">
        <span>Segregation at Source:</span>
        <div class="radio-group">
          <label class="radio-option">
            <input type="radio" name="segregation" value="Yes"> Yes
          </label>
          <label class="radio-option">
            <input type="radio" name="segregation" value="No"> No
          </label>
        </div>
      </div>
      <div class="input-group">
        <span>Composting Facility:</span>
        <div class="radio-group">
          <label class="radio-option">
            <input type="radio" name="composting" value="Yes"> Yes
          </label>
          <label class="radio-option">
            <input type="radio" name="composting" value="No"> No
          </label>
        </div>
      </div>
      <div class="input-group">
        <span>Composting Capacity:</span>
        <input type="text" style="width: 80px;">
        <span>kg/day</span>
      </div>
      <div class="input-group">
        <span>Waste Collection Agency:</span>
        <input type="text" style="width: 120px;">
      </div>
    </div>
  </div>
</div>

<h2 onclick="toggleSection('spaceInfo')">Space Information</h2>
<div id="spaceInfo" class="section">
  <!-- Meeting and Event Spaces Category -->
  <div class="category-header">Meeting and Event Spaces</div>
  <div class="category-content">
    
    <div class="subcategory tree-level-2">
      
      <div class="subcategory-header">
        <input type="checkbox" id="banquetCheck"> 
        Banquet Halls
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>Maximum Capacity (people)</th>
              <th>No. of Events/Year</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="banquetTableBody">
            <tr>
              <td><input type="text" class="number-format" name="banquet_area[]" style="width: 80px;"></td>
              <td>
                <select name="banquet_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td><input type="text" class="number-format" name="banquet_capacity[]" style="width: 60px;"></td>
              <td><input type="text" class="number-format" name="banquet_events[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('banquetTableBody', 'banquet')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="outdoorLawnCheck"> 
        Outdoor event Lawns
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Max occupancy</th>
              <th>Area</th>
              <th>Unit</th>
              <th>No. of Events/month</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="outdoorLawnTableBody">
            <tr>
              <td><input type="text" class="number-format" name="outdoor_lawn_occupancy[]" style="width: 60px;"></td>
              <td><input type="text" class="number-format" name="outdoor_lawn_area[]" style="width: 80px;"></td>
              <td>
                <select name="outdoor_lawn_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td><input type="text" class="number-format" name="outdoor_lawn_events[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('outdoorLawnTableBody', 'outdoorLawn')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="conferenceCheck"> 
        Conference Rooms/Boardrooms
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Seating Capacity</th>
              <th>Area</th>
              <th>Unit</th>
              <th>Usage hours/month</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="conferenceTableBody">
            <tr>
              <td><input type="text" class="number-format" name="conference_capacity[]" style="width: 60px;"></td>
              <td><input type="text" class="number-format" name="conference_area[]" style="width: 80px;"></td>
              <td>
                <select name="conference_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td><input type="text" class="number-format" name="conference_hours[]" style="width: 80px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('conferenceTableBody', 'conference')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="businessCentreCheck"> 
        Business Centre
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>No. of workstations</th>
              <th>Usage hours/day</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="businessCentreTableBody">
            <tr>
              <td><input type="text" class="number-format" name="business_centre_workstations[]" style="width: 60px;"></td>
              <td><input type="text" class="number-format" name="business_centre_hours[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('businessCentreTableBody', 'businessCentre')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  
  <!-- Food and Beverage Outlets Category -->
  <div class="category-header">Food and Beverage Outlets</div>
  <div class="category-content">
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="restaurantCheck"> 
        All Day Dining Restaurants
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>No. of seats</th>
              <th>Avg. daily covers (meals served/day)</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="restaurantTableBody">
            <tr>
              <td><input type="text" class="number-format" name="restaurant_seats[]" style="width: 60px;"></td>
              <td><input type="text" class="number-format" name="restaurant_covers[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('restaurantTableBody', 'restaurant')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="specialityRestaurantCheck"> 
        Speciality Restaurants
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>No. of seats</th>
              <th>Avg. daily covers (meals served/day)</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="specialityRestaurantTableBody">
            <tr>
              <td><input type="text" class="number-format" name="speciality_restaurant_seats[]" style="width: 60px;"></td>
              <td><input type="text" class="number-format" name="speciality_restaurant_covers[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('specialityRestaurantTableBody', 'specialityRestaurant')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="cafeCheck"> 
        Cafe/Coffee Shop
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>No. of seats</th>
              <th>Operating Hours</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="cafeTableBody">
            <tr>
              <td><input type="text" class="number-format" name="cafe_seats[]" style="width: 60px;"></td>
              <td><input type="text" name="cafe_hours[]" style="width: 100px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('cafeTableBody', 'cafe')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="kitchenCheck"> 
        Kitchen
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>No. of meals prepared per day</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="kitchenTableBody">
            <tr>
              <td><input type="text" class="number-format" name="kitchen_area[]" style="width: 80px;"></td>
              <td>
                <select name="kitchen_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td><input type="text" class="number-format" name="kitchen_meals[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('kitchenTableBody', 'kitchen')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="staffCafetariaCheck"> 
        Staff Cafetaria
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>No. of meals prepared per day</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="staffCafetariaTableBody">
            <tr>
              <td><input type="text" class="number-format" name="staff_cafetaria_area[]" style="width: 80px;"></td>
              <td>
                <select name="staff_cafetaria_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td><input type="text" class="number-format" name="staff_cafetaria_meals[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('staffCafetariaTableBody', 'staffCafetaria')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  
  <!-- Wellness and Recreation Category -->
  <div class="category-header">Wellness and Recreation</div>
  <div class="category-content">
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="spaCheck"> 
        Spa/Massage Rooms
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>No. of Rooms</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="spaTableBody">
            <tr>
              <td><input type="text" class="number-format" name="spa_rooms[]" style="width: 60px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('spaTableBody', 'spa')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="salonCheck"> 
        Salon
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="salonTableBody">
            <tr>
              <td><input type="text" class="number-format" name="salon_area[]" style="width: 80px;"></td>
              <td>
                <select name="salon_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('salonTableBody', 'salon')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="gymCheck"> 
        Fitness center/gym
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="gymTableBody">
            <tr>
              <td><input type="text" class="number-format" name="gym_area[]" style="width: 80px;"></td>
              <td>
                <select name="gym_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('gymTableBody', 'gym')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="multipurposeCheck"> 
        Multipurpose Space
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="multipurposeTableBody">
            <tr>
              <td><input type="text" class="number-format" name="multipurpose_area[]" style="width: 80px;"></td>
              <td>
                <select name="multipurpose_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('multipurposeTableBody', 'multipurpose')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="indoorPoolCheck"> 
        Swimming Pool (Indoor)
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="indoorPoolTableBody">
            <tr>
              <td><input type="text" class="number-format" name="indoor_pool_area[]" style="width: 80px;"></td>
              <td>
                <select name="indoor_pool_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('indoorPoolTableBody', 'indoorPool')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="outdoorPoolCheck"> 
        Swimming Pool (Outdoor)
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="outdoorPoolTableBody">
            <tr>
              <td><input type="text" class="number-format" name="outdoor_pool_area[]" style="width: 80px;"></td>
              <td>
                <select name="outdoor_pool_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('outdoorPoolTableBody', 'outdoorPool')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  
  <!-- BOH & Service Areas Category -->
  <div class="category-header">BOH & Service Areas</div>
  <div class="category-content">
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="laundryCheck"> 
        Laundry Rooms
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>Kg of laundry/day</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="laundryTableBody">
            <tr>
              <td><input type="text" class="number-format" name="laundry_area[]" style="width: 80px;"></td>
              <td>
                <select name="laundry_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td><input type="text" class="number-format" name="laundry_kg[]" style="width: 80px;"></td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('laundryTableBody', 'laundry')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="subcategory tree-level-2">
      <div class="subcategory-header">
        <input type="checkbox" id="parkingCheck"> 
        Parking Basement
      </div>
      <div class="subcategory-content">
        <table class="input-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>Unit</th>
              <th>No. of Parking</th>
              <th>Lighting Type</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="parkingTableBody">
            <tr>
              <td><input type="text" class="number-format" name="parking_area[]" style="width: 80px;"></td>
              <td>
                <select name="parking_area_unit[]">
                  <option value="sqm">sq.m</option>
                  <option value="sqft">sq.ft</option>
                </select>
              </td>
              <td><input type="text" class="number-format" name="parking_spaces[]" style="width: 60px;"></td>
              <td>
                <select name="parking_lighting[]">
                  <option value="">Select type</option>
                  <option value="led">LED</option>
                  <option value="fluorescent">Fluorescent</option>
                  <option value="other">Other</option>
                </select>
              </td>
              <td class="action-buttons">
                <button type="button" class="remove-row-btn" onclick="removeRow(this)">−</button>
                <button type="button" class="remove-row-btn" onclick="addRow('parkingTableBody', 'parking')" style="color: #4CAF50;">+</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- HVAC Systems Section -->
<h2 onclick="toggleSection('hvacSystems')">HVAC Systems</h2>
<div id="hvacSystems" class="section">
  
  <!-- Chiller Section -->
  <div class="subcategory-header">
    <input type="checkbox" id="chillerCheck"> 
    Chiller Details 
  </div>
  <div class="subcategory-content">
    <div class="table-responsive">
      <table class="table table-bordered table-hover">
        <thead>
          <tr>
            <th class="fixed-col">Parameter</th>
            <th class="chiller-col">
              <div class="chiller-header">
                <span>Chiller 1</span>
                <button type="button" class="btn btn-sm btn-danger btn-remove-col" onclick="chillerCount = removeColumn(chillerCount, 1, 'chillerTableBody', 'chiller', 'Chiller')" title="Remove Chiller" disabled>-</button>
              </div>
            </th>
            <th class="action-col">
              <button type="button" class="btn btn-sm btn-success" onclick="chillerCount = addTableColumn(chillerCount, 'chillerTableBody', 'chiller', 'Chiller')" title="Add Chiller">+</button>
            </th>
          </tr>
        </thead>
        <tbody id="chillerTableBody">
          <tr>
            <td class="fixed-col">Type of Chiller (Water/Air)</td>
            <td>
              <select name="chiller1_type" class="form-control form-control-sm">
                <option value="">Select</option>
                <option>Water</option>
                <option>Air</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Type of Compressor</td>
            <td>
              <select name="chiller1_compressor_type" class="form-control form-control-sm">
                <option value="">Select</option>
                <option>Screw</option>
                <option>Scroll</option>
                <option>Centrifugal</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Adiabatic Cooling (Air-cooled)</td>
            <td>
              <select name="chiller1_adiabatic_cooling" class="form-control form-control-sm">
                <option value="">Select</option>
                <option>Yes</option>
                <option>No</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Year of Installation</td>
            <td><input type="text" name="chiller1_installation_year" class="form-control form-control-sm year-picker" readonly></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Number of Chillers</td>
            <td><input type="text" class="number-format" name="chiller1_quantity" class="form-control form-control-sm" min="1"></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Working</td>
            <td><input type="text" class="number-format" name="chiller1_working" class="form-control form-control-sm" min="0" placeholder="Count"></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Standby</td>
            <td><input type="text" class="number-format" name="chiller1_standby" class="form-control form-control-sm" min="0" placeholder="Count"></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Operating Schedule</td>
            <td><input type="text" name="chiller1_schedule" class="form-control form-control-sm" placeholder="e.g. 24/7"></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Avg Running Hrs (Seasonal)</td>
            <td><input type="text" class="number-format" name="chiller1_seasonal_hrs" class="form-control form-control-sm" step="0.1" min="0" placeholder="Hours"></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Avg Running Hrs (Day/Night)</td>
            <td><input type="text" class="number-format" name="chiller1_daynight_hrs" class="form-control form-control-sm" step="0.1" min="0" placeholder="Hours"></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Capacity (TR)</td>
            <td><input type="text" class="number-format" name="chiller1_capacity" class="form-control form-control-sm" step="0.01" min="0"></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Avg Loading %</td>
            <td>
              <div class="input-group input-group-sm">
                <input type="text" class="number-format" name="chiller1_loading_pct" class="form-control" min="0" max="100">
                <span class="input-group-text">%</span>
              </div>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Condenser & Evaporator Approach</td>
            <td><input type="text" name="chiller1_approach" class="form-control form-control-sm" placeholder="e.g. 5°C/3°C"></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Avg Setpoint (Seasonal)</td>
            <td>
              <div class="input-group input-group-sm">
                <input type="text" class="number-format" name="chiller1_seasonal_setpoint" class="form-control" step="0.1">
                <span class="input-group-text">°C</span>
              </div>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Avg Setpoint (Day/Night)</td>
            <td>
              <div class="input-group input-group-sm">
                <input type="text" class="number-format" name="chiller1_daynight_setpoint" class="form-control" step="0.1">
                <span class="input-group-text">°C</span>
              </div>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Rated kW/TR</td>
            <td><input type="text" class="number-format" name="chiller1_rated_kwtr" class="form-control form-control-sm" step="0.01" min="0"></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Actual kW/TR</td>
            <td><input type="text" class="number-format" name="chiller1_actual_kwtr" class="form-control form-control-sm" step="0.01" min="0"></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">VFD</td>
            <td>
              <select name="chiller1_vfd_status" class="form-control form-control-sm" onchange="updateVFDModulationField(this)">
                <option value="">Select</option>
                <option>Yes</option>
                <option>No</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">VFD Modulation %</td>
            <td>
              <div class="input-group input-group-sm">
                <input type="text" class="number-format" name="chiller1_vfd_modulation" class="form-control" min="0" max="100" disabled>
                <span class="input-group-text">%</span>
              </div>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Chiller Plant Manager Automation</td>
            <td>
              <select name="chiller1_automation" class="form-control form-control-sm">
                <option value="">Select</option>
                <option>Yes</option>
                <option>No</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Refrigerant Type</td>
            <td>
              <select name="chiller1_refrigerant" class="form-control form-control-sm">
                <option value="">Select</option>
                <option>R134a</option>
                <option>R404</option>
                <option>R410a</option>
                <option>Other</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Avg Top-up per year (kg)</td>
            <td><input type="text" class="number-format" name="chiller1_refrigerant_topup" class="form-control form-control-sm" step="0.1" min="0"></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">BTU Meter Installed</td>
            <td>
              <select name="chiller1_btu_meter" class="form-control form-control-sm">
                <option value="">Select</option>
                <option>Yes</option>
                <option>No</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Automated Tube Cleaning System</td>
            <td>
              <select name="chiller1_tube_cleaning" class="form-control form-control-sm">
                <option value="">Select</option>
                <option>Yes</option>
                <option>No</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Chilled Water Chemical Treatment</td>
            <td>
              <select name="chiller1_chemical_treatment" class="form-control form-control-sm">
                <option value="">Select</option>
                <option>Yes</option>
                <option>No</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Chilled Water Line Insulation Damage</td>
            <td>
              <div class="d-grid" style="grid-template-columns: 60% 40%; gap: 0.5rem;">
                <select name="chiller1_insulation_damage" class="form-control form-control-sm">
                  <option value="">Select</option>
                  <option>Yes</option>
                  <option>No</option>
                </select>
                <input type="text" class="number-format" name="chiller1_insulation_damage_pct" class="form-control form-control-sm" min="0" max="100" placeholder="%" disabled>
              </div>
            </td>
            <td class="action-col"></td>
          </tr>
        </tbody>
      </table>
    </div>

    <script>
      let chillerCount = 1;
      function addChillerColumn() {
        chillerCount = addTableColumn(chillerCount, 'chillerTableBody', 'chiller', 'Chiller')
      }
      function removeChillerColumn(clickedIndex) {
        removeColumn(chillerCount, clickedIndex, 'chillerTableBody', 'chiller', 'Chiller')
      }

    </script>
  </div>

  <!-- Boiler in chillers Section (Nikunj) -->
  <div class="subcategory-header">
    <input type="checkbox" id="boilerCheck"> 
    Boiler Details 
  </div>
  <div class="subcategory-content">
    <div class="table-responsive">
      <table class="table table-bordered table-hover">
        <thead>
          <tr>
            <th class="fixed-col">Parameter</th>
            <th class="boiler-col tbl-col">
              <div class="boiler-header">
                <span>Boiler 1</span>
                <!-- <button type="button" class="btn btn-sm btn-danger btn-remove-col" onclick="removeColdRoomColumn(1)" title="Remove ColdRoom" disabled>-</button> -->
                <button type="button" class="btn btn-sm btn-danger btn-remove-col" onclick="removeBoilerColumn(1)" title="Remove Boiler" disabled>-</button>
              </div>
            </th>
            <th class="action-col">
              <button type="button" class="btn btn-sm btn-success" onclick="addBoilerColumn()" title="Add Boiler">+</button>
            </th>
          </tr>
        </thead>
        <tbody id="boilerTableBody" class ="componenttblBody">
          
          <tr>
            <td class="fixed-col">Year of Installation</td>
            <td><input type="text" name="boiler1_installation_year" class="form-control form-control-sm year-picker" readonly></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Type of Unit </td>
            <td>
              <select name="boiler1_unit" class="form-control form-control-sm">
                <option value="">Select</option>
                <option>Fuel</option>
                <option>Electricity</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">VFD Install </td>
            <td>
              <select name="boiler1_vfd" class="form-control form-control-sm">
                <option value="">Select</option>
                <option>Yes</option>
                <option>No</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>


          <tr>
            <td class="fixed-col">Fuel Consumption (Lts/day)</td>
            <td><input type="text" class="number-format" name="boiler1_fuelConsumption" class="form-control form-control-sm" min="1"></td>
            <td class="action-col"></td>
          </tr>

          <tr>
            <td class="fixed-col">Electricity Consumption (kW)</td>
            <td><input type="text" class="number-format" name="boiler1_electricityConsumption" class="form-control form-control-sm" step="1" min="1"></td>
            <td class="action-col"></td>
          </tr>
          
          <tr>
            <td class="fixed-col">Capacity (TPH)</td>
            <td><input type="text" class="number-format" name="boiler1_capacity" class="form-control form-control-sm" step="1" min="0"></td>
            <td class="action-col"></td>
          </tr>
          
          
          

          
          
          <tr>
            <td class="fixed-col">Insulation damage </td>
            <td>
              <select name="boiler1_insulationDamage" class="form-control form-control-sm">
                <option value="">Select</option>
                <option>Yes</option>
                <option>No</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>
          
          <tr>
            <td class="fixed-col">Damage (%)</td>
            <td><input type="text" class="number-format" name="boilder1_damagePercentage" class="form-control form-control-sm" step="1" min="0"></td>
            <td class="action-col"></td>
          </tr>
          
        </tbody>
      </table>
    </div>

    <script>
      let boilerCount = 1;

      function addBoilerColumn() {
        boilerCount = addTableColumn(boilerCount, 'boilerTableBody', 'boiler', 'Boiler')
        
      }

      function removeBoilerColumn(clickedIndex) {
        boilerCount = removeColumn(boilerCount,clickedIndex,'boilerTableBody', 'boiler', 'Boiler')

      }
    </script>
  </div>
  <!-- Boiler in chillers Section (Nikunj)-->
  
  
  <div class="subcategory-header">
    <input type="checkbox" id="solarhotwaterCheck">
    Solar Hot Water Details
  </div>
  <div class="subcategory-content">
    <div class="table-responsive">
      <table class="table table-bordered table-hover">
        <thead>
          <tr>
            <th class="fixed-col">Parameter</th>
            <th class="solarhotwater-col tbl-col">
              <div class="solarhotwater-header">
                <span>Solar Hot Water 1</span>
                <button type="button" class="btn btn-sm btn-danger btn-remove-col" onclick="removeSolarHotWaterColumn(1)" title="Remove Solar Hot Water" disabled>-</button>
              </div>
            </th>
            <th class="action-col">
              <button type="button" class="btn btn-sm btn-success" onclick="addSolarHotWaterColumn()" title="Add Solar Hot Water">+</button>
            </th>
          </tr>
        </thead>
        <tbody id="solarhotwaterTableBody" class ="componenttblBody">
         
          <tr>
            <td class="fixed-col">Year of Installation</td>
            <td><input type="text" name="solarhotwater1_installation_year" class="form-control form-control-sm year-picker" readonly></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Type of collector</td>
            <td>
              <select name="solarhotwater1_type_of_collector" class="form-control form-control-sm">
                <option value="">Select</option>
                <option>Flat Plate</option>
                <option>Evacuated Tube</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>

          <tr>
            <td class="fixed-col">Capacity (KLD)</td>
            <td><input type="text" class="number-format" name="solarhotwater1_capacity" class="form-control form-control-sm" step="0.01" min="0"></td>
            <td class="action-col"></td>
          </tr>
          
          
          
          <tr>
            <td class="fixed-col">Insulation Damage</td>
            <td>
              <div class="d-grid" style="grid-template-columns: 60% 40%; gap: 0.5rem;">
                <select name="solarhotwater1_insulation_damage" class="form-control form-control-sm solarhotwater-insulation-select">
                  <option value="">Select</option>
                  <option>Yes</option>
                  <option>No</option>
                </select>
                <input type="text" class="number-format" name="solarhotwater1_insulation_damage_pct" class="form-control form-control-sm solarhotwater-insulation-pct" min="0" max="100" placeholder="%" disabled>
              </div>
            </td>
            <td class="action-col"></td>
          </tr>
         
          
          

         
          
          
          
          
        </tbody>
      </table>
    </div>

    <script>
      let solarhotwaterCount = 1;
      function addSolarHotWaterColumn() {
        solarhotwaterCount = addTableColumn(solarhotwaterCount, 'solarhotwaterTableBody', 'solarhotwater', 'Solar Hot Water');
      }
      function removeSolarHotWaterColumn(clickedIndex) {
        solarhotwaterCount = removeColumn(solarhotwaterCount, clickedIndex, 'solarhotwaterTableBody', 'solarhotwater', 'Solar Hot Water');
      }
    </script>
  </div>

  <!-- Fresh air/Exhaust air/Pressurization fan Section -->
  <div class="subcategory-header">
    <input type="checkbox" id="FreshAirCheck"> 
    Fresh air/Exhaust air/Pressurization fan Details 
  </div>
  <div class="subcategory-content">
    <div class="table-responsive">
      <table class="table table-bordered table-hover">
        <thead>
          <tr>
            <th class="fixed-col">Parameter</th>
            <th class="freshair-col tbl-col">
              <div class="freshair-header">
                <span>FreshAir 1</span>
                <button type="button" class="btn btn-sm btn-danger btn-remove-col" onclick="removeFreshAirColumn(1)" title="Remove FreshAir" disabled>-</button>
              </div>
            </th>
            <th class="action-col">
              <button type="button" class="btn btn-sm btn-success" onclick="addFreshAirColumn()" title="Add FreshAir">+</button>
            </th>
          </tr>
        </thead>
        <tbody id="freshairTableBody" class ="componenttblBody">
         
          <tr>
            <td class="fixed-col">Year of Installation</td>
            <td><input type="text" name="freshair1_installation_year" class="form-control form-control-sm year-picker" readonly></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Air flow rate (CFM)</td>
            <td><input type="text" class="number-format" name="freshair1_airflow_rate" class="form-control form-control-sm" min="1"></td>
            <td class="action-col"></td>
          </tr>

          <tr>
            <td class="fixed-col">Motor Capacity (kW)</td>
            <td><input type="text" class="number-format" name="freshair1_motor_capacity" class="form-control form-control-sm" step="0.01" min="0"></td>
            <td class="action-col"></td>
          </tr>
          
          
          
          
         
          
          <tr>
            <td class="fixed-col">Rating </td>
            <td>
              <input type="text" name="freshair1_rating" class="form-control form-control-sm" >
            </td>
            <td class="action-col"></td>
          </tr>

          <tr>
            <td class="fixed-col">VFD</td>
            <td>
              <select name="freshair1_vfd_status" class="form-control form-control-sm" onchange="updateVFDModulatingfrequencyField(this)">
                <option value="">Select</option>
                <option>Yes</option>
                <option>No</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Modulating frequency range ( Min-Max Hz)</td>
            <td>
              <div class="input-group input-group-sm">
                <input type="text" class="number-format" name="freshair1_vfd_modulation" class="form-control"  disabled>
                <!-- <span class="input-group-text">Min-Max Hz</span> -->
              </div>
            </td>
            <td class="action-col"></td>
          </tr>
          
          
          
          
        </tbody>
      </table>
    </div>

    <script>
      let freshairCount = 1;
      function addFreshAirColumn() {
        freshairCount = addTableColumn(freshairCount, 'freshairTableBody', 'freshair', 'FreshAir')
      }
      function removeFreshAirColumn(clickedIndex) {
        removeColumn(freshairCount, clickedIndex, 'freshairTableBody', 'freshair', 'FreshAir')
      }
    </script>
  </div>

  <!-- Cold rooms/Walk in chillers Section (Nikunj) -->
  <div class="subcategory-header">
    <input type="checkbox" id="coldRoomCheck"> 
    Cold rooms/Walk in chillers Details 
  </div>
  <div class="subcategory-content">
    <div class="table-responsive">
      <table class="table table-bordered table-hover">
        <thead>
          <tr>
            <th class="fixed-col">Parameter</th>
            <th class="coldroom-col tbl-col">
              <div class="coldroom-header">
                <span>ColdRoom 1</span>
                <button type="button" class="btn btn-sm btn-danger btn-remove-col" onclick="coldroomCount = removeColumn(coldroomCount, 1, 'coldroomTableBody', 'coldroom', 'ColdRoom')" title="Remove ColdRoom" disabled>-</button>
              </div>
            </th>
            <th class="action-col">
              <button type="button" class="btn btn-sm btn-success" onclick="coldroomCount = addTableColumn(coldroomCount, 'coldroomTableBody', 'coldroom', 'ColdRoom')" title="Add ColdRoom">+</button>
            </th>
          </tr>
        </thead>
        <tbody id="coldroomTableBody" class ="componenttblBody">
          <tr>
            <td class="fixed-col">Type of Chiller</td>
            <td>
              <select name="coldroom1_type" class="form-control form-control-sm">
                <option value="">Select</option>
                <option>Deep freeze</option>
                <option>Normal</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">EER/SEER Rating</td>
            <td><input type="text" class="number-format" name="coldroom1_eer_rating" class="form-control form-control-sm" min="1"></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Year of Installation</td>
            <td><input type="text" name="coldroom1_installation_year" class="form-control form-control-sm year-picker" readonly></td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Number of Chillers</td>
            <td><input type="text" class="number-format" name="coldroom1_quantity" class="form-control form-control-sm" min="1"></td>
            <td class="action-col"></td>
          </tr>

          <tr>
            <td class="fixed-col">Capacity (TR)</td>
            <td><input type="text" class="number-format" name="coldroom1_capacity" class="form-control form-control-sm" step="0.01" min="0"></td>
            <td class="action-col"></td>
          </tr>
          
          
          
          
         
          
          <tr>
            <td class="fixed-col">Refrigerant </td>
            <td>
              <select name="coldroom1_refrigerant" class="form-control form-control-sm">
                <option value="">Select</option>
                <option>R134a</option>
                <option>R404</option>
                <option>R410a</option>
                <option>Other</option>
              </select>
            </td>
            <td class="action-col"></td>
          </tr>
          <tr>
            <td class="fixed-col">Avg Top-up per year (kg)</td>
            <td><input type="text" class="number-format" name="coldroom1_refrigerant_topup" class="form-control form-control-sm" step="0.1" min="0"></td>
            <td class="action-col"></td>
          </tr>
          
          
          
          
        </tbody>
      </table>
    </div>

    <script>
      let coldroomCount = 1;
      function addColdRoomColumn() {
        coldroomCount = addTableColumn(coldroomCount, 'coldroomTableBody', 'coldroom', 'ColdRoom')
      }
      function removeColdRoomColumn(clickedIndex) {
        removeColumn(coldroomCount, clickedIndex, 'coldroomTableBody', 'coldroom', 'ColdRoom')
      }
      
    </script>
  </div>
  <!-- Cold rooms/Walk in chillers Section (Nikunj)-->

  <!-- Solar Hot Water Section -->
  

</div>

<!-- <div class="form-actions">
  <button type="button" onclick="saveForm()">Save</button>
  <button type="submit" onclick="submitForm()">Submit</button>
</div> -->

<script>
  // Show the first section by default
  window.onload = function() {
    // Initialize all collapsible elements first
    if (typeof initializeCollapsibles === 'function') {
      initializeCollapsibles();
    }
    
    // Show the first section and its first category
    const firstSection = document.querySelector('.section');
    if (firstSection) {
      firstSection.style.display = 'block';
      const firstCategory = firstSection.querySelector('.category-content');
      if (firstCategory) {
        firstCategory.style.display = 'block';
        firstCategory.classList.remove('collapsed');
        const header = firstCategory.previousElementSibling;
        if (header && header.classList.contains('category-header')) {
          header.classList.remove('collapsed');
        }
      }
    }
    
    // Initialize year pickers
    if (typeof initializeYearPickers === 'function') {
      initializeYearPickers();
    }
    
    // Initialize VFD modulation fields
    if (typeof updateVFDModulationField === 'function') {
      $('[name^="chiller"][name$="_vfd_status"]').each(function() {
        updateVFDModulationField(this);
      });
    }
  };

  // Toggle section visibility
  function toggleSection(id) {
    const section = document.getElementById(id);
    if (section) {
      section.style.display = section.style.display === 'none' ? 'block' : 'none';
    }
  }
  
  // Toggle collapsible element
  function toggleCollapsible(header) {
    const isCategory = header.classList.contains('category-header');
    const content = header.nextElementSibling;
    
    // Toggle the collapsed state
    const willCollapse = !header.classList.contains('collapsed');
    
    if (willCollapse) {
      header.classList.add('collapsed');
      if (content) {
        content.style.display = 'none';
        content.classList.add('collapsed');
      }
    } else {
      header.classList.remove('collapsed');
      if (content) {
        content.style.display = 'block';
        content.classList.remove('collapsed');
      }
    }
    
    // Handle checkbox state for subcategories
    if (!isCategory) {
      const checkbox = header.querySelector('input[type="checkbox"]');
      if (checkbox) {
        checkbox.checked = !willCollapse;
      }
    }
  }
  
  // Initialize collapsible elements
  function initializeCollapsibles() {
    // Set up category headers
    const categoryHeaders = document.querySelectorAll('.category-header');
    categoryHeaders.forEach(header => {
      // Add click handler
      header.addEventListener('click', function(e) {
        e.stopPropagation();
        toggleCollapsible(this);
      });
      
      // Initialize state - collapsed by default
      const content = header.nextElementSibling;
      const isInitiallyExpanded = header.hasAttribute('data-expanded');
      
      if (!isInitiallyExpanded) {
        header.classList.add('collapsed');
        if (content) {
          content.style.display = 'none';
          content.classList.add('collapsed');
        }
      } else if (content) {
        content.style.display = 'block';
        content.classList.remove('collapsed');
      }
    });
    
    // Set up subcategory headers with checkboxes
    const subcategoryHeaders = document.querySelectorAll('.subcategory-header');
    subcategoryHeaders.forEach(header => {
      const checkbox = header.querySelector('input[type="checkbox"]');
      const content = header.nextElementSibling;
      const isInitiallyExpanded = header.hasAttribute('data-expanded');
      
      // Initialize state - collapsed by default unless specified otherwise
      if (!isInitiallyExpanded) {
        header.classList.add('collapsed');
        if (content) {
          content.style.display = 'none';
          content.classList.add('collapsed');
        }
        if (checkbox) checkbox.checked = false;
      } else if (content) {
        content.style.display = 'block';
        content.classList.remove('collapsed');
        if (checkbox) checkbox.checked = true;
      }
      if (checkbox) {
        checkbox.checked = false;
      }
      
      // Add click handler for header (not checkbox)
      header.addEventListener('click', function(e) {
        if (e.target !== checkbox) {
          e.stopPropagation();
          toggleCollapsible(this);
        }
      });
      
      // Add change handler for checkbox
      if (checkbox) {
        checkbox.addEventListener('change', function(e) {
          e.stopPropagation();
          toggleCollapsible(header);
        });
      }
    });
  }
  
  // Function to expand all sections
  function expandAll() {
    // Show all sections
    document.querySelectorAll('.section').forEach(section => {
      section.style.display = 'block';
    });
    
    // Expand all category headers
    document.querySelectorAll('.category-header').forEach(header => {
      if (header.classList.contains('collapsed')) {
        toggleCollapsible(header);
      }
    });
    
    // Expand all subcategory headers and check their checkboxes
    document.querySelectorAll('.subcategory-header').forEach(header => {
      if (header.classList.contains('collapsed')) {
        toggleCollapsible(header);
      }
      const checkbox = header.querySelector('input[type="checkbox"]');
      if (checkbox && !checkbox.checked) {
        checkbox.checked = true;
      }
    });
  }
  
  // Function to collapse all sections
  function collapseAll() {
    // Hide all sections
    document.querySelectorAll('.section').forEach(section => {
      section.style.display = 'none';
    });
    
    // Collapse every category header
    document.querySelectorAll('.category-header').forEach(header => {
      if (!header.classList.contains('collapsed')) {
        toggleCollapsible(header);
      }
    });
    
    // Collapse all subcategory headers and uncheck their checkboxes
    document.querySelectorAll('.subcategory-header').forEach(header => {
      if (!header.classList.contains('collapsed')) {
        toggleCollapsible(header);
      }
      const checkbox = header.querySelector('input[type="checkbox"]');
      if (checkbox && checkbox.checked) {
        checkbox.checked = false;
      }
    });
  }

  // City data based on state selection
  const cityData = {
    "AP": ["Visakhapatnam", "Vijayawada", "Guntur", "Nellore", "Kurnool"],
    "AR": ["Itanagar", "Naharlagun", "Pasighat", "Namsai"],
    "AS": ["Guwahati", "Silchar", "Dibrugarh", "Jorhat", "Nagaon"],
    "BR": ["Patna", "Gaya", "Muzaffarpur", "Bhagalpur", "Darbhanga"],
    "CG": ["Raipur", "Bhilai", "Bilaspur", "Korba", "Durg"],
    "GA": ["Panaji", "Margao", "Vasco da Gama", "Mapusa", "Ponda"],
    "GJ": ["Ahmedabad", "Surat", "Vadodara", "Rajkot", "Gandhinagar"],
    "HR": ["Gurugram", "Faridabad", "Panipat", "Ambala", "Karnal"],
    "HP": ["Shimla", "Dharamshala", "Solan", "Mandi", "Kullu"],
    "JH": ["Ranchi", "Jamshedpur", "Dhanbad", "Bokaro", "Hazaribagh"],
    "KA": ["Bengaluru", "Mysuru", "Hubli", "Mangaluru", "Belagavi"],
    "KL": ["Thiruvananthapuram", "Kochi", "Kozhikode", "Thrissur", "Kollam"],
    "MP": ["Bhopal", "Indore", "Jabalpur", "Gwalior", "Ujjain"],
    "MH": ["Mumbai", "Pune", "Nagpur", "Thane", "Nashik"],
    "MN": ["Imphal", "Thoubal", "Bishnupur", "Churachandpur"],
    "ML": ["Shillong", "Tura", "Jowai", "Nongstoin", "Williamnagar"],
    "MZ": ["Aizawl", "Lunglei", "Champhai", "Serchhip", "Kolasib"],
    "NL": ["Kohima", "Dimapur", "Mokokchung", "Tuensang", "Wokha"],
    "OR": ["Bhubaneswar", "Cuttack", "Rourkela", "Berhampur", "Sambalpur"],
    "PB": ["Ludhiana", "Amritsar", "Jalandhar", "Patiala", "Bathinda"],
    "RJ": ["Jaipur", "Jodhpur", "Udaipur", "Kota", "Ajmer"],
    "SK": ["Gangtok", "Namchi", "Gyalshing", "Mangan", "Singtam"],
    "TN": ["Chennai", "Coimbatore", "Madurai", "Tiruchirappalli", "Salem"],
    "TG": ["Hyderabad", "Warangal", "Nizamabad", "Karimnagar", "Khammam"],
    "TR": ["Agartala", "Udaipur", "Dharmanagar", "Kailasahar", "Belonia"],
    "UP": ["Lucknow", "Kanpur", "Agra", "Varanasi", "Meerut"],
    "UK": ["Dehradun", "Haridwar", "Roorkee", "Haldwani", "Rudrapur"],
    "WB": ["Kolkata", "Howrah", "Durgapur", "Asansol", "Siliguri"],
    "DL": ["New Delhi", "Delhi", "Dwarka", "Rohini", "Pitampura"]
  };

  // Update city dropdown based on state selection
  document.addEventListener('DOMContentLoaded', function() {
    const stateDropdown = document.getElementById('stateDropdown');
    const cityDropdown = document.getElementById('cityDropdown');
    
    if (stateDropdown && cityDropdown) {
      stateDropdown.addEventListener('change', function() {
        const selectedState = this.value;
        cityDropdown.innerHTML = ''; // Clear existing options
        
        if (!selectedState) {
          const defaultOption = document.createElement('option');
          defaultOption.value = '';
          defaultOption.textContent = 'Please select a state first';
          cityDropdown.appendChild(defaultOption);
          return;
        }
        
        // Add default option
        const defaultOption = document.createElement('option');
        defaultOption.value = '';
        defaultOption.textContent = 'Please select';
        cityDropdown.appendChild(defaultOption);
        
        // Add cities for selected state
        const cities = cityData[selectedState] || [];
        cities.forEach(city => {
          const option = document.createElement('option');
          option.value = city;
          option.textContent = city;
          cityDropdown.appendChild(option);
        });
      });
    }
    
    // Toggle input fields based on checkbox selection
    const checkboxes = document.querySelectorAll('.subcategory-header input[type="checkbox"]');
      
    checkboxes.forEach(checkbox => {
      // Find the closest subcategory content
      const header = checkbox.closest('.subcategory-header');
      const subcategoryContent = header ? header.nextElementSibling : null;
      if (!subcategoryContent) {
        // Some headers (e.g., Chiller Details) may not have a dedicated content block
        return;
      }

      const inputGroups = subcategoryContent.querySelectorAll('.input-group');

      // Initialize visibility based on checkbox state
      inputGroups.forEach(group => {
        group.style.display = checkbox.checked ? 'flex' : 'none';
      });

      // Toggle visibility on checkbox change
      checkbox.addEventListener('change', function () {
        inputGroups.forEach(group => {
          group.style.display = this.checked ? 'flex' : 'none';
        });
      });
    });
    
    // Add event listeners for expand/collapse all buttons
    const expandAllBtn = document.getElementById('expandAllBtn');
    const collapseAllBtn = document.getElementById('collapseAllBtn');
    
    if (expandAllBtn) {
      expandAllBtn.addEventListener('click', expandAll);
    }
    
    if (collapseAllBtn) {
      collapseAllBtn.addEventListener('click', collapseAll);
    }
  });

  function saveForm() {
    alert("Form values saved locally (you can implement actual save logic here).");
  }

  function submitForm() {
    // Basic validation for required fields
    const requiredFields = document.querySelectorAll('input[required], select[required]');
    let valid = true;
    
    requiredFields.forEach(field => {
      if (!field.value) {
        field.style.borderColor = '#e32';
        valid = false;
      } else {
        field.style.borderColor = '#ccc';
      }
    });
    
    if (!valid) {
      alert("Please fill in all required fields.");
      return;
    }
    
    alert("Form submitted (you can hook this up to a backend).");
  }

  function addRow(tableId, type) {
    const tbody = document.getElementById(tableId);
    const newRow = tbody.insertRow();
    
    // Clone the first row's cells to maintain the same structure
    const firstRow = tbody.rows[0];
    newRow.innerHTML = firstRow.innerHTML;
    
    // Clear any values in the new row
    const inputs = newRow.getElementsByTagName('input');
    const selects = newRow.getElementsByTagName('select');
    
    for (let input of inputs) {
      if (input.type !== 'button') {
        input.value = '';
      }
    }
    
    for (let select of selects) {
      select.selectedIndex = 0;
    }
    
    // Show the table if it was hidden
    const table = tbody.closest('table');
    if (table) {
      table.style.display = 'table';
    }
  }

  function removeRow(button) {
    const row = button.closest('tr');
    const tbody = row.parentNode;
    const table = tbody.closest('table');
    
    // Don't remove the last row
    if (tbody.rows.length > 1) {
      row.remove();
    } else {
      // Clear the row instead of removing it
      const inputs = row.getElementsByTagName('input');
      const selects = row.getElementsByTagName('select');
      
      for (let input of inputs) {
        if (input.type !== 'button') {
          input.value = '';
        }
      }
      
      for (let select of selects) {
        select.selectedIndex = 0;
      }
      
      // Hide the table if it's empty
      if (table && tbody.rows.length === 1) {
        const inputs = tbody.getElementsByTagName('input');
        let isEmpty = true;
        for (let input of inputs) {
          if (input.type !== 'button' && input.value.trim() !== '') {
            isEmpty = false;
            break;
          }
        }
        if (isEmpty) {
          table.style.display = 'none';
        }
      }
    }
  }
</script>

<script>
// =========================
// Utility Functions
// =========================

// Initialize year pickers for all elements with .year-picker
function initializeYearPickers() {
  $('.year-picker').not('.hasYearPicker').addClass('hasYearPicker').datepicker({
    changeMonth: false,
    changeYear: true,
    showButtonPanel: true,
    dateFormat: 'yy',
    yearRange: '1900:2100',
    beforeShow: function(input, inst) {
      setTimeout(function() {
        $(".ui-datepicker-month, .ui-datepicker-calendar, .ui-datepicker-close").hide();
      }, 0);
    },
    onClose: function(dateText, inst) {
      const year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
      if (year) {
        $(this).val(year).trigger('change');
      }
    }
  });
}

// Enable/disable VFD modulation field based on VFD status
// Enable/disable VFD modulation field based on VFD status (Chiller, Cold Room, etc)
function updateVFDModulationField(select) {
  var $td = $(select).closest('td');
  var colIndex = $td.index();
  var $nextRow = $(select).closest('tr').next();
  var $targetTd = $nextRow.find('td').eq(colIndex);
  var $input = $targetTd.find('input[type="number"]');
  if ($(select).val() === "Yes") {
    $input.prop('disabled', false);
  } else {
    $input.prop('disabled', true).val('');
  }
}

// Enable/disable VFD modulating frequency field for Fresh Air section
function updateVFDModulatingfrequencyField(select) {
  var $td = $(select).closest('td');
  var colIndex = $td.index();
  var $nextRow = $(select).closest('tr').next();
  var $targetTd = $nextRow.find('td').eq(colIndex);
  var $input = $targetTd.find('input[type="number"]');
  if ($(select).val() === "Yes") {
    $input.prop('disabled', false);
  } else {
    $input.prop('disabled', true).val('');
  }
}


// =========================
// Main Initialization
// =========================

$(document).ready(function() {
  // 1. Initialize year pickers on page load
  initializeYearPickers();

  // 2. Initialize VFD modulation fields on page load
  $('[name^="chiller"][name$="_vfd_status"]').each(function() {
    updateVFDModulationField(this);
  });
  // 2b. Initialize Fresh Air VFD modulating frequency fields on page load
  $('[name^="freshair"][name$="_vfd_status"]').each(function() {
    updateVFDModulatingfrequencyField(this);
  });

  // 3. Handle VFD status changes
  $(document).on('change', '[name^="chiller"][name$="_vfd_status"]', function() {
    updateVFDModulationField(this);
  });
  // 3b. Handle Fresh Air VFD status changes
  $(document).on('change', '[name^="freshair"][name$="_vfd_status"]', function() {
    updateVFDModulatingfrequencyField(this);
  });

  // 4. Re-initialize year pickers and VFD fields when columns are added
  $(document).on('columnAdded', function() {
    initializeYearPickers();
    $('[name^="chiller"][name$="_vfd_status"]').each(function() {
      updateVFDModulationField(this);
    });
  });

  // 5. Enable/disable insulation damage percentage input based on selection
  $(document).on('change', '[name^="chiller"][name$="_insulation_damage"]', function() {
    const damagePercentInput = $(this).closest('td').find('input[type="number"]');
    const hasDamage = $(this).val() === 'Yes';
    damagePercentInput.prop('disabled', !hasDamage);
    if (!hasDamage) {
      damagePercentInput.val('');
    }
  });

  // 6. Collapsible logic for subheadings (e.g., Chiller Details)
  $('.subcategory-header').css('cursor', 'pointer').on('click', function(e) {
    // Only toggle if NOT clicking the checkbox
    if ($(e.target).is('input[type="checkbox"]')) return;
    $(this).toggleClass('collapsed');
    $(this).next('.subcategory-content').slideToggle(200);
  });
});
</script>
  <script src="script.js"></script>
  <script>
    // Initialize number formatting on all number inputs on page load
    document.addEventListener('DOMContentLoaded', function() {
      if (typeof initNumberFormatting === 'function') {
        initNumberFormatting();
      }
    });
  </script>
</body>
</html>




